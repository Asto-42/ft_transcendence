<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pong Game</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
        background-color: #000;
		color : greenyellow;
      }
      #titre {
        color: greenyellow;
        text-align: center;
        margin-bottom: 20px;
      }
      #buttons {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
      }
      canvas {
        border: 2px solid #fff;
      }
    </style>
  </head>
  <body>
    <div id="titre">
      Ft_transcendence en mode detente mon pote
    </div>
    <div id="buttons">
      <button id="settingsButton">Param√®tres</button>
      <button id="customizationButton">Customisation</button>
    </div>
	<div>
		Vitesse :
		<div id="ballSpeed">

		</div>
	</div>
    <canvas id="pongCanvas" width="800" height="400"></canvas>
    <script>
      const canvas = document.getElementById("pongCanvas");
	  const ballSpeed = document.getElementById("ballSpeed");
      const ctx = canvas.getContext("2d");

      const paddleWidth = 10;
      const paddleHeight = 1000;
      const ballRadius = 10;

      let upArrowPressed = false;
      let downArrowPressed = false;

      const paddleSpeed = 8;
      let playerPaddle = {
        x: 0,
        y: canvas.height / 2 - paddleHeight / 2,
        width: paddleWidth,
        height: paddleHeight,
        dy: 0
      };
      let computerPaddle = {
        x: canvas.width - paddleWidth,
        y: canvas.height / 2 - paddleHeight / 2,
        width: paddleWidth,
        height: paddleHeight,
        dy: 4
      };

      let ball = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        radius: ballRadius,
        speed: 2,
        dx: 4,
        dy: 4
      };

      function drawPaddle(x, y, width, height) {
        ctx.fillStyle = "#fff";
        ctx.fillRect(x, y, width, height);
      }

      function drawBall(x, y, radius) {
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, Math.PI * 2);
        ctx.closePath();
        ctx.fill();
      }

      function update() {
        if (upArrowPressed && playerPaddle.y > 0) {
          playerPaddle.y -= paddleSpeed;
        } else if (downArrowPressed && (playerPaddle.y < canvas.height - paddleHeight)) {
          playerPaddle.y += paddleSpeed;
        }

        computerPaddle.y += computerPaddle.dy;
        if (computerPaddle.y <= 0 || computerPaddle.y + paddleHeight >= canvas.height) {
          computerPaddle.dy *= -1;
        }

        ball.x += ball.dx * ball.speed ;
        ball.y += ball.dy * ball.speed ;

        if (ball.y + ball.radius >= canvas.height || ball.y - ball.radius <= 0) {
          ball.dy *= -1;
		  ball.speed = ball.speed + 0.2;
        }

        if (ball.x - ball.radius <= playerPaddle.x + paddleWidth && ball.y >= playerPaddle.y && ball.y <= playerPaddle.y + paddleHeight) {
          ball.dx *= -1;
		  ball.speed = ball.speed + 0.2;
        }

        if (ball.x + ball.radius >= computerPaddle.x && ball.y >= computerPaddle.y && ball.y <= computerPaddle.y + paddleHeight) {
          ball.dx *= -1;
		  ball.speed = ball.speed + 0.2;
        }
		if (ball.speed > 10)
			ball.speed = 10;
		ballSpeed.textContent = ball.speed;
        if (ball.x - ball.radius <= 0 || ball.x + ball.radius >= canvas.width) {
          resetBall();
        }
      }

      function resetBall() {
        ball.x = canvas.width / 2;
        ball.y = canvas.height / 2;
        ball.dx *= -1;
		ball.speed = 2;
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawPaddle(playerPaddle.x, playerPaddle.y, playerPaddle.width, playerPaddle.height);
        drawPaddle(computerPaddle.x, computerPaddle.y, computerPaddle.width, computerPaddle.height);
        drawBall(ball.x, ball.y, ball.radius);
      }

      function gameLoop() {
        update();
        draw();
        requestAnimationFrame(gameLoop);
      }

      document.addEventListener("keydown", (event) => {
        if (event.key == "ArrowUp") {
          upArrowPressed = true;
        } else if (event.key == "ArrowDown") {
          downArrowPressed = true;
        }
      });

      document.addEventListener("keyup", (event) => {
        if (event.key == "ArrowUp") {
          upArrowPressed = false;
        } else if (event.key == "ArrowDown") {
          downArrowPressed = false;
        }
      });

      gameLoop();
    </script>
  </body>
</html>
